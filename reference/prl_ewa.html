<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Experience-Weighted Attraction Model — prl_ewa • hBayesDM</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



  <link href="../extra.css" rel="stylesheet">
  

<meta property="og:title" content="Experience-Weighted Attraction Model — prl_ewa" />
<meta property="og:description" content="Hierarchical Bayesian Modeling of the Probabilistic Reversal Learning Task using Experience-Weighted Attraction Model.
It has the following parameters: phi (1 - learning rate), rho (experience decay factor), beta (inverse temperature).

Task: Probabilistic Reversal Learning Task
Model: Experience-Weighted Attraction Model (Ouden et al., 2013)

" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">hBayesDM</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.1.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/CCS-Lab/hBayesDM/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Experience-Weighted Attraction Model</h1>
    <small class="dont-index">Source: <a href='https://github.com/CCS-Lab/hBayesDM/blob/master/R/prl_ewa.R'><code>R/prl_ewa.R</code></a></small>
    <div class="hidden name"><code>prl_ewa.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Hierarchical Bayesian Modeling of the Probabilistic Reversal Learning Task using Experience-Weighted Attraction Model.
It has the following parameters: <code>phi</code> (1 - learning rate), <code>rho</code> (experience decay factor), <code>beta</code> (inverse temperature).</p>
<ul>
<li><p><strong>Task</strong>: Probabilistic Reversal Learning Task</p></li>
<li><p><strong>Model</strong>: Experience-Weighted Attraction Model (Ouden et al., 2013)</p></li>
</ul>

    </div>

    <pre class="usage"><span class='fu'>prl_ewa</span><span class='op'>(</span>
  data <span class='op'>=</span> <span class='cn'>NULL</span>,
  niter <span class='op'>=</span> <span class='fl'>4000</span>,
  nwarmup <span class='op'>=</span> <span class='fl'>1000</span>,
  nchain <span class='op'>=</span> <span class='fl'>4</span>,
  ncore <span class='op'>=</span> <span class='fl'>1</span>,
  nthin <span class='op'>=</span> <span class='fl'>1</span>,
  inits <span class='op'>=</span> <span class='st'>"vb"</span>,
  indPars <span class='op'>=</span> <span class='st'>"mean"</span>,
  modelRegressor <span class='op'>=</span> <span class='cn'>FALSE</span>,
  vb <span class='op'>=</span> <span class='cn'>FALSE</span>,
  inc_postpred <span class='op'>=</span> <span class='cn'>FALSE</span>,
  adapt_delta <span class='op'>=</span> <span class='fl'>0.95</span>,
  stepsize <span class='op'>=</span> <span class='fl'>1</span>,
  max_treedepth <span class='op'>=</span> <span class='fl'>10</span>,
  <span class='va'>...</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>data</th>
      <td><p>Data to be modeled. It should be given as a data.frame object,
a filepath for a tab-seperated txt file, <code>"example"</code> to use example data, or
<code>"choose"</code> to choose data with an interactive window.
Columns in the dataset must include:
"subjID", "choice", "outcome". See <b>Details</b> below for more information.</p></td>
    </tr>
    <tr>
      <th>niter</th>
      <td><p>Number of iterations, including warm-up. Defaults to 4000.</p></td>
    </tr>
    <tr>
      <th>nwarmup</th>
      <td><p>Number of iterations used for warm-up only. Defaults to 1000.</p></td>
    </tr>
    <tr>
      <th>nchain</th>
      <td><p>Number of Markov chains to run. Defaults to 4.</p></td>
    </tr>
    <tr>
      <th>ncore</th>
      <td><p>Number of CPUs to be used for running. Defaults to 1.</p></td>
    </tr>
    <tr>
      <th>nthin</th>
      <td><p>Every <code>i == nthin</code> sample will be used to generate the posterior distribution.
Defaults to 1. A higher number can be used when auto-correlation within the MCMC sampling is
high.</p></td>
    </tr>
    <tr>
      <th>inits</th>
      <td><p>Character value specifying how the initial values should be generated.
Possible options are "vb" (default), "fixed", "random", or your own initial values.</p></td>
    </tr>
    <tr>
      <th>indPars</th>
      <td><p>Character value specifying how to summarize individual parameters. Current options
are: "mean", "median", or "mode".</p></td>
    </tr>
    <tr>
      <th>modelRegressor</th>
      <td><p>Whether to export model-based regressors (<code>TRUE</code> or <code>FALSE</code>).
For this model they are: "ev_c", "ev_nc", "ew_c", "ew_nc".</p></td>
    </tr>
    <tr>
      <th>vb</th>
      <td><p>Use variational inference to approximately draw from a posterior distribution. Defaults
to <code>FALSE</code>.</p></td>
    </tr>
    <tr>
      <th>inc_postpred</th>
      <td><p>Include trial-level posterior predictive simulations in model output (may greatly increase file
size). Defaults to <code>FALSE</code>.
If set to <code>TRUE</code>, it includes: "y_pred"</p></td>
    </tr>
    <tr>
      <th>adapt_delta</th>
      <td><p>Floating point value representing the target acceptance probability of a new
sample in the MCMC chain. Must be between 0 and 1. See <b>Details</b> below.</p></td>
    </tr>
    <tr>
      <th>stepsize</th>
      <td><p>Integer value specifying the size of each leapfrog step that the MCMC sampler can
take on each new iteration. See <b>Details</b> below.</p></td>
    </tr>
    <tr>
      <th>max_treedepth</th>
      <td><p>Integer value specifying how many leapfrog steps the MCMC sampler can take
on each new iteration. See <b>Details</b> below.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>For this model, there is no model-specific argument.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A class "hBayesDM" object <code>modelData</code> with the following components:</p><dl>
  <dt>model</dt><dd><p>Character value that is the name of the model (\code"prl_ewa").</p></dd>
  <dt>allIndPars</dt><dd><p>Data.frame containing the summarized parameter values (as specified by
    <code>indPars</code>) for each subject.</p></dd>
  <dt>parVals</dt><dd><p>List object containing the posterior samples over different parameters.</p></dd>
  <dt>fit</dt><dd><p>A class <code><a href='https://mc-stan.org/rstan/reference/stanfit-class.html'>stanfit</a></code> object that contains the fitted Stan
    model.</p></dd>
  <dt>rawdata</dt><dd><p>Data.frame containing the raw data used to fit the model, as specified by
    the user.</p></dd>
  
  
  <dt>modelRegressor</dt><dd><p>List object containing the extracted model-based regressors.</p></dd>

</dl>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>This section describes some of the function arguments in greater detail.</p>
<p><strong>data</strong> should be assigned a character value specifying the full path and name (including
  extension information, e.g. ".txt") of the file that contains the behavioral data-set of all
  subjects of interest for the current analysis. The file should be a <strong>tab-delimited</strong> text
  file, whose rows represent trial-by-trial observations and columns represent variables.<br />
For the Probabilistic Reversal Learning Task, there should be 3 columns of data with the
  labels "subjID", "choice", "outcome". It is not necessary for the columns to be in this particular order,
  however it is necessary that they be labeled correctly and contain the information below:</p><dl>
  <dt>subjID</dt><dd><p>A unique identifier for each subject in the data-set.</p></dd>
  <dt>choice</dt><dd><p>Integer value representing the option chosen on that trial: 1 or 2.</p></dd>
  <dt>outcome</dt><dd><p>Integer value representing the outcome of that trial (where reward == 1, and loss == -1).</p></dd>
  
  
  
  
  
  

</dl><p><strong>*</strong>Note: The file may contain other columns of data (e.g. "ReactionTime", "trial_number",
  etc.), but only the data within the column names listed above will be used during the modeling.
  As long as the necessary columns mentioned above are present and labeled correctly, there is no
  need to remove other miscellaneous data columns.</p>
<p><strong>nwarmup</strong> is a numerical value that specifies how many MCMC samples should not be stored
  upon the beginning of each chain. For those familiar with Bayesian methods, this is equivalent
  to burn-in samples. Due to the nature of the MCMC algorithm, initial values (i.e. where the
  sampling chains begin) can have a heavy influence on the generated posterior distributions. The
  <code>nwarmup</code> argument can be set to a high number in order to curb the effects that initial
  values have on the resulting posteriors.</p>
<p><strong>nchain</strong> is a numerical value that specifies how many chains (i.e. independent sampling
  sequences) should be used to draw samples from the posterior distribution. Since the posteriors
  are generated from a sampling process, it is good practice to run multiple chains to ensure
  that a reasonably representative posterior is attained. When the sampling is complete, it is
  possible to check the multiple chains for convergence by running the following line of code:
  <code><a href='https://rdrr.io/r/graphics/plot.default.html'>plot(output, type = "trace")</a></code>. The trace-plot should resemble a "furry caterpillar".</p>
<p><strong>nthin</strong> is a numerical value that specifies the "skipping" behavior of the MCMC sampler,
  using only every <code>i == nthin</code> samples to generate posterior distributions. By default,
  <code>nthin</code> is equal to 1, meaning that every sample is used to generate the posterior.</p>
<p><strong>Control Parameters:</strong> <code>adapt_delta</code>, <code>stepsize</code>, and <code>max_treedepth</code> are
  advanced options that give the user more control over Stan's MCMC sampler. It is recommended
  that only advanced users change the default values, as alterations can profoundly change the
  sampler's behavior. Refer to 'The No-U-Turn Sampler: Adaptively Setting Path Lengths in
  Hamiltonian Monte Carlo (Hoffman &amp; Gelman, 2014, Journal of Machine Learning Research)' for
  more information on the sampler control parameters. One can also refer to 'Section 34.2. HMC
  Algorithm Parameters' of the <a href='https://mc-stan.org/users/documentation/'>Stan User's Guide
  and Reference Manual</a>, or to the help page for <code><a href='https://mc-stan.org/rstan/reference/stan.html'>stan</a></code> for a less technical
  description of these arguments.</p>
<h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Contributors</h3>
<p><a href='https://ccs-lab.github.io/team/jaeyeong-yang/'>Jaeyeong Yang (for model-based regressors)</a> &lt;<a href='mailto:jaeyeong.yang1125@gmail.com'>jaeyeong.yang1125@gmail.com</a>&gt;, <a href='https://ccs-lab.github.io/team/harhim-park/'>Harhim Park (for model-based regressors)</a> &lt;<a href='mailto:hrpark12@gmail.com'>hrpark12@gmail.com</a>&gt;</p>

    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Ouden, den, H. E. M., Daw, N. D., Fernandez, G., Elshout, J. A., Rijpkema, M., Hoogman, M., et al. (2013). Dissociable Effects of Dopamine and Serotonin on Reversal Learning. Neuron, 80(4), 1090-1100. https://doi.org/10.1016/j.neuron.2013.08.030</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>We refer users to our in-depth tutorial for an example of using hBayesDM:
  <a href='https://rpubs.com/CCSL/hBayesDM'>https://rpubs.com/CCSL/hBayesDM</a></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>
<span class='co'># Run the model with a given data.frame as df</span>
<span class='va'>output</span> <span class='op'>&lt;-</span> <span class='fu'>prl_ewa</span><span class='op'>(</span>
  data <span class='op'>=</span> <span class='va'>df</span>, niter <span class='op'>=</span> <span class='fl'>2000</span>, nwarmup <span class='op'>=</span> <span class='fl'>1000</span>, nchain <span class='op'>=</span> <span class='fl'>4</span>, ncore <span class='op'>=</span> <span class='fl'>4</span><span class='op'>)</span>

<span class='co'># Run the model with example data</span>
<span class='va'>output</span> <span class='op'>&lt;-</span> <span class='fu'>prl_ewa</span><span class='op'>(</span>
  data <span class='op'>=</span> <span class='st'>"example"</span>, niter <span class='op'>=</span> <span class='fl'>2000</span>, nwarmup <span class='op'>=</span> <span class='fl'>1000</span>, nchain <span class='op'>=</span> <span class='fl'>4</span>, ncore <span class='op'>=</span> <span class='fl'>4</span><span class='op'>)</span>

<span class='co'># Visually check convergence of the sampling chains (should look like 'hairy caterpillars')</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>output</span>, type <span class='op'>=</span> <span class='st'>"trace"</span><span class='op'>)</span>

<span class='co'># Check Rhat values (all Rhat values should be less than or equal to 1.1)</span>
<span class='fu'><a href='rhat.html'>rhat</a></span><span class='op'>(</span><span class='va'>output</span><span class='op'>)</span>

<span class='co'># Plot the posterior distributions of the hyper-parameters (distributions should be unimodal)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>output</span><span class='op'>)</span>

<span class='co'># Show the WAIC and LOOIC model fit estimates</span>
<span class='fu'><a href='printFit.html'>printFit</a></span><span class='op'>(</span><span class='va'>output</span><span class='op'>)</span>
<span class='op'>}</span>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Woo-Young Ahn, Nate Haines, Lei Zhang.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


