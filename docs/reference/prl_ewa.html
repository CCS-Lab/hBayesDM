<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Probabilistic Reversal Learning Task — prl_ewa • hBayesDM</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Probabilistic Reversal Learning Task — prl_ewa" />

<meta property="og:description" content="Hierarchical Bayesian Modeling of the Probabilistic Reversal Learning (PRL) Task using the following parameters: &quot;phi&quot; (1 - learning rate), &quot;rho&quot; (experience decay factor), and &quot;beta&quot; (inverse temperature).
Contributor (for model-based regressors): Jaeyeong Yang and Harhim Park
MODEL:
Experience-Weighted Attraction Model (Ouden et al., 2013, Neuron)" />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">hBayesDM</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.6.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Probabilistic Reversal Learning Task</h1>
    
    <div class="hidden name"><code>prl_ewa.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>Hierarchical Bayesian Modeling of the Probabilistic Reversal Learning (PRL) Task using the following parameters: "phi" (1 - learning rate), "rho" (experience decay factor), and "beta" (inverse temperature).</p>
<p>Contributor (for model-based regressors): <a href='https://ccs-lab.github.io/team/jaeyeong-yang/'>Jaeyeong Yang</a> and <a href='https://ccs-lab.github.io/team/harhim-park/'>Harhim Park</a></p>
<p><strong>MODEL:</strong>
Experience-Weighted Attraction Model (Ouden et al., 2013, Neuron)</p>
    
    </div>

    <pre class="usage"><span class='fu'>prl_ewa</span>(<span class='kw'>data</span> <span class='kw'>=</span> <span class='st'>"choice"</span>, <span class='kw'>niter</span> <span class='kw'>=</span> <span class='fl'>3000</span>, <span class='kw'>nwarmup</span> <span class='kw'>=</span> <span class='fl'>1000</span>, <span class='kw'>nchain</span> <span class='kw'>=</span> <span class='fl'>1</span>,
  <span class='kw'>ncore</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>nthin</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>inits</span> <span class='kw'>=</span> <span class='st'>"random"</span>, <span class='kw'>indPars</span> <span class='kw'>=</span> <span class='st'>"mean"</span>,
  <span class='kw'>saveDir</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>modelRegressor</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>vb</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>inc_postpred</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>adapt_delta</span> <span class='kw'>=</span> <span class='fl'>0.95</span>, <span class='kw'>stepsize</span> <span class='kw'>=</span> <span class='fl'>1</span>,
  <span class='kw'>max_treedepth</span> <span class='kw'>=</span> <span class='fl'>10</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>data</th>
      <td><p>A .txt file containing the data to be modeled. Data columns should be labelled as follows: "subjID", "choice", and "outcome". See <b>Details</b> below for more information.</p></td>
    </tr>
    <tr>
      <th>niter</th>
      <td><p>Number of iterations, including warm-up.</p></td>
    </tr>
    <tr>
      <th>nwarmup</th>
      <td><p>Number of iterations used for warm-up only.</p></td>
    </tr>
    <tr>
      <th>nchain</th>
      <td><p>Number of chains to be run.</p></td>
    </tr>
    <tr>
      <th>ncore</th>
      <td><p>Integer value specifying how many CPUs to run the MCMC sampling on. Defaults to 1.</p></td>
    </tr>
    <tr>
      <th>nthin</th>
      <td><p>Every <code>i == nthin</code> sample will be used to generate the posterior distribution. Defaults to 1. A higher number can be used when auto-correlation within the MCMC sampling is high.</p></td>
    </tr>
    <tr>
      <th>inits</th>
      <td><p>Character value specifying how the initial values should be generated. Options are "fixed" or "random" or your own initial values.</p></td>
    </tr>
    <tr>
      <th>indPars</th>
      <td><p>Character value specifying how to summarize individual parameters. Current options are: "mean", "median", or "mode".</p></td>
    </tr>
    <tr>
      <th>saveDir</th>
      <td><p>Path to directory where .RData file of model output (<code>modelData</code>) can be saved. Leave blank if not interested.</p></td>
    </tr>
    <tr>
      <th>modelRegressor</th>
      <td><p>Exporting model-based regressors? TRUE or FALSE. Currently not available for this model.</p></td>
    </tr>
    <tr>
      <th>vb</th>
      <td><p>Use variational inference to approximately draw from a posterior distribution. Defaults to FALSE.</p></td>
    </tr>
    <tr>
      <th>inc_postpred</th>
      <td><p>Include trial-level posterior predictive simulations in model output (may greatly increase file size). Defaults to FALSE.</p></td>
    </tr>
    <tr>
      <th>adapt_delta</th>
      <td><p>Floating point number representing the target acceptance probability of a new sample in the MCMC chain. Must be between 0 and 1. See <b>Details</b> below.</p></td>
    </tr>
    <tr>
      <th>stepsize</th>
      <td><p>Integer value specifying the size of each leapfrog step that the MCMC sampler can take on each new iteration. See <b>Details</b> below.</p></td>
    </tr>
    <tr>
      <th>max_treedepth</th>
      <td><p>Integer value specifying how many leapfrog steps that the MCMC sampler can take on each new iteration. See <b>Details</b> below.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p><code>modelData</code>  A class <code>"hBayesDM"</code> object with the following components:</p><dl class='dl-horizontal'>
 <dt><code>model</code></dt><dd><p>Character string with the name of the model (<code>"prl_ewa"</code>).</p></dd>
 <dt><code>allIndPars</code></dt><dd><p><code>"data.frame"</code> containing the summarized parameter
   values (as specified by <code>"indPars"</code>) for each subject.</p></dd>
 <dt><code>parVals</code></dt><dd><p>A <code>"list"</code> where each element contains posterior samples
   over different model parameters.</p></dd>
 <dt><code>fit</code></dt><dd><p>A class <code>"stanfit"</code> object containing the fitted model.</p></dd>
 <dt><code>rawdata</code></dt><dd><p><code>"data.frame"</code> containing the raw data used to fit the model, as specified by the user.</p></dd>
</dl>

    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>This section describes some of the function arguments in greater detail.</p>
<p><strong>data</strong> should be assigned a character value specifying the full path and name of the file, including the file extension
(e.g. ".txt"), that contains the behavioral data of all subjects of interest for the current analysis.
The file should be a <strong>tab-delimited</strong> text (.txt) file whose rows represent trial-by-trial observations and columns
represent variables. For the Probabilistic Reversal Learning Task, there should be three columns of data
with the labels "subjID", "choice", and "outcome". It is not necessary for the columns to be in this particular order,
however it is necessary that they be labelled correctly and contain the information below:</p><dl class='dl-horizontal'>
 <dt><code>"subjID"</code></dt><dd><p>A unique identifier for each subject within data-set to be analyzed.</p></dd>
 <dt><code>"choice"</code></dt><dd><p>An integer value representing the chosen choice option within the given trial (e.g., 1 or 2 in PRL).</p></dd>
 <dt><code>"outcome"</code></dt><dd><p>A 1 or -1 for outcome within each given trial (1 = reward, -1 = loss).</p></dd>
</dl><p><strong>*</strong>Note: The data.txt file may contain other columns of data (e.g. "Reaction_Time", "trial_number", etc.), but only the data with the column
names listed above will be used for analysis/modeling. As long as the columns above are present and labelled correctly,
there is no need to remove other miscellaneous data columns.</p>
<p><strong>nwarmup</strong> is a numerical value that specifies how many MCMC samples should not be stored upon the
beginning of each chain. For those familiar with Bayesian methods, this value is equivalent to a burn-in sample.
Due to the nature of MCMC sampling, initial values (where the sampling chain begins) can have a heavy influence
on the generated posterior distributions. The <code>nwarmup</code> argument can be set to a high number in order to curb the
effects that initial values have on the resulting posteriors.</p>
<p><strong>nchain</strong> is a numerical value that specifies how many chains (i.e. independent sampling sequences) should be
used to draw samples from the posterior distribution. Since the posteriors are generated from a sampling
process, it is good practice to run multiple chains to ensure that a representative posterior is attained. When
sampling is completed, the multiple chains may be checked for convergence with the <code>plot(myModel, type = "trace")</code>
command. The chains should resemble a "furry caterpillar".</p>
<p><strong>nthin</strong> is a numerical value that specifies the "skipping" behavior of the MCMC samples being chosen
to generate the posterior distributions. By default, <code>nthin</code> is equal to 1, hence every sample is used to
generate the posterior.</p>
<p><strong>Contol Parameters:</strong> adapt_delta, stepsize, and max_treedepth are advanced options that give the user more control
over Stan's MCMC sampler. The Stan creators recommend that only advanced users change the default values, as alterations
can profoundly change the sampler's behavior. Refer to Hoffman &amp; Gelman (2014, Journal of Machine Learning Research) for
more information on the functioning of the sampler control parameters. One can also refer to section 58.2 of the
<a href='http://mc-stan.org/documentation/'>Stan User's Manual</a> for a less technical description of these arguments.</p>
    
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Hoffman, M. D., &amp; Gelman, A. (2014). The No-U-turn sampler: adaptively setting path lengths in Hamiltonian Monte Carlo. The
Journal of Machine Learning Research, 15(1), 1593-1623.</p>
<p>Ouden, den, H. E. M., Daw, N. D., Fernandez, G., Elshout, J. A., Rijpkema, M., Hoogman, M., et al. (2013). Dissociable
Effects of Dopamine and Serotonin on Reversal Learning. Neuron, 80(4), 1090-1100. http://doi.org/10.1016/j.neuron.2013.08.030</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>We refer users to our in-depth tutorial for an example of using hBayesDM: <a href='https://rpubs.com/CCSL/hBayesDM'>https://rpubs.com/CCSL/hBayesDM</a></p></div>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='co'># NOT RUN {</span>
<span class='co'># Run the model and store results in "output"</span>
<span class='no'>output</span> <span class='kw'>&lt;-</span> <span class='fu'>prl_ewa</span>(<span class='kw'>data</span> <span class='kw'>=</span> <span class='st'>"example"</span>, <span class='kw'>niter</span> <span class='kw'>=</span> <span class='fl'>2000</span>, <span class='kw'>nwarmup</span> <span class='kw'>=</span> <span class='fl'>1000</span>, <span class='kw'>nchain</span> <span class='kw'>=</span> <span class='fl'>3</span>, <span class='kw'>ncore</span> <span class='kw'>=</span> <span class='fl'>3</span>)

<span class='co'># Visually check convergence of the sampling chains (should like like 'hairy caterpillars')</span>
<span class='fu'>plot</span>(<span class='no'>output</span>, <span class='kw'>type</span> <span class='kw'>=</span> <span class='st'>'trace'</span>)

<span class='co'># Check Rhat values (all Rhat values should be less than or equal to 1.1)</span>
<span class='fu'><a href='rhat.html'>rhat</a></span>(<span class='no'>output</span>)

<span class='co'># Plot the posterior distributions of the hyper-parameters (distributions should be unimodal)</span>
<span class='fu'>plot</span>(<span class='no'>output</span>)

<span class='co'># Show the WAIC and LOOIC model fit estimates</span>
<span class='fu'><a href='printFit.html'>printFit</a></span>(<span class='no'>output</span>)
<span class='co'># }</span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#references">References</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Woo-Young Ahn, Nate Haines, Lei Zhang.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  

  </body>
</html>

